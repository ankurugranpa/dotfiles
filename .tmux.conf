##### ── セッション/ツリー操作 ──
# Alt+a でセッション一覧（choose-tree）を表示
bind -n M-a choose-tree -s

# choose-tree 画面（tree キーテーブル）で Delete で確認付き Kill
bind -T tree Delete confirm-before -p "Kill #{session_name}? (y/n)" "kill-session -t '%%'"
# choose-tree の画面で x を押したら確認付きでセッション削除
# bind -T tree x confirm-before -p "Kill #{session_name}? (y/n)" "kill-session -t '%%'"


##### ── Pane/Window 基本操作（Vim ライク）──
# ペイン移動（hjkl）
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ペインリサイズ（HJKL 長押し可 -r）
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# 新しいウィンドウ/分割。現在ペインのカレントディレクトリを引き継ぐ
bind c  new-window              -c '#{pane_current_path}'
bind \\ split-window -h         -c '#{pane_current_path}'
bind -  split-window -v         -c '#{pane_current_path}'

##### ── コピーモード（vi キーバインド & 矩形選択）──
setw -g mode-keys vi                           # vi 風キーバインド
bind -T copy-mode-vi v   send -X begin-selection
bind -T copy-mode-vi y   send -X copy-selection-and-cancel

# 矩形選択トグル：C-v を正式採用。C-q も予備で用意（端末が C-q を食う場合あり）
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi C-q send -X rectangle-toggle

##### ── 端末/表示/操作まわり ──
# 256色 & TrueColor
set -g  default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:RGB"

# マウス有効化、表示時間、異サイズ端末のリサイズ
set -g mouse on
set -g display-time 2000
setw -g aggressive-resize on

# bind -n M-a choose-tree -s
# 
# # Vimのキーバインドでペインを移動する
# bind h select-pane -L
# bind j select-pane -D
# bind k select-pane -U
# bind l select-pane -R
# 
# # コピーモードでvimキーバインド
# setw -g mode-keys vi
# 
# # 'v' で選択を始める
# bind -T copy-mode-vi v send -X begin-selection
# 
# # C-vで矩形選択の切り替え
# bind -T copy-mode-vi C-q send -X rectangle-toggle
# # bind -T vi-copy C-q rectangle-toggle
# 
# 
# # Vimのキーバインドでペインをリサイズする
# bind -r H resize-pane -L 5
# bind -r J resize-pane -D 5
# bind -r K resize-pane -U 5
# bind -r L resize-pane -R 5
# 
# # 新しいPaneを開く場合
# bind c new-window -c '#{pane_current_path}'
# # 現在のPaneを水平分割してWindowを開く
# bind \\ split-window -h -c '#{pane_current_path}'
# # 現在のPaneを垂直分割してWindowを開く
# bind - split-window -v -c '#{pane_current_path}'
# 
# #256色対応
# set -g default-terminal "tmux-256color"
# # set -g default-terminal "screen-256color"
# # set -g terminal-overrides ",xterm-256color:Tc"
# 
# set-option -g default-terminal "tmux-256color"
# set-option -ga terminal-overrides ",xterm-256color:RGB"
# set -g default-terminal "xterm"
# 
# set -g display-time 2000
# 
# # 異なるサイズの端末からアクセスした時にリサイズ
# setw -g aggressive-resize on
# 
# #マウススクロール反映
# #set-window-option -g mode-mouse on
# set -g mouse on
# guibg=NONE
